/* nrdemo.nrx -- NetRexx demonstration program                      */
/* Copyright (c) IBM Corporation 1996, 2011. All rights reserved.  */
/* Copyright (c) RexxLA 2011-2023. All rights reserved.            */
/*-----------------------------------------------------------------*/
/* This program is a simple demonstration of some of the features  */
/* of NetRexx.                                                     */
/*                                                                 */
/* To compile this program:                                        */
/*                                                                 */
/*   java com.ibm.netrexx.process.NetRexxC nrdemo                    */
/*                                                                 */
/* To run the program:                                             */
/*                                                                 */
/*   java nrdemo                                                   */
/*                                                                 */
/*-----------------------------------------------------------------*/
options binary strictcase

class nrdemo

 method main(args=String[]) static

  say 'nrdemo -- NetRexx demonstration program'
  say

  /* Simple loop */
  loop i=1 to 5
    say 'This is line' i
    end
  say

  /* Working with a property */
  p=person('Fred', 'Flintstone')
  say 'The person is' p.name
  say

  /* Simple conditional */
  if p.name='Fred Flintstone' then say 'Name is correct.'
                             else say 'Name is not correct.'
  say

  /* Using a select construct */
  select
    when p.name='Barney Rubble' then say 'Hello Barney!'
    when p.name='Fred Flintstone' then do
      say 'Hello Fred!'
      say 'How are you today?'
      end
    otherwise
      say 'I do not know you.'
    end
  say

  /* Catching an exception */
  do
    say 'Let''s try to divide by zero...'
    i=1/0
    say 'The result is' i
  catch ex=ArithmeticException
    say 'Exception caught:' ex.getMessage
  end
  say

  /* Working with Java objects */
  d=Date()
  say 'The time and date is' d.toString
  say

  /* Working with NetRexx strings */
  nrx=Rexx "This is a NetRexx string"
  say 'The third word of "'nrx'" is "'nrx.word(3)'"'
  say

  /* A loop that uses a Java iterator */
  list=ArrayList()
  list.add('First')
  list.add('Second')
  list.add('Third')
  loop e_ over list
    say 'From list:' e_
    end
  say

  return

/* --- A simple class --- */
class person

  properties private
    firstName=String
    lastName=String

  properties public
    name=String

  method person(first=String, last=String)
    this.firstName=first
    this.lastName=last

  method getName returns String
    return firstName lastName

/* A simple example of a binary property */
class binaryprop

  properties indirect
    myprop=boolean

  method getMyprop returns boolean
    say '[getting myprop]'
    return myprop
  method setMyprop(new)
    say '[setting myprop to' new']'
    myprop=new
